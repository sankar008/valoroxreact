{"ast":null,"code":"import _regeneratorRuntime from \"/home/sankar/reactjs/valorox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/sankar/reactjs/valorox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/sankar/reactjs/valorox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/sankar/reactjs/valorox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/sankar/reactjs/valorox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/sankar/reactjs/valorox/src/container/login/resetPassword.js\";\nimport React, { useState } from \"react\";\nimport * as API from \"../../api/api\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport * as appUtil from \"./../../helper/appUtils\";\nvar initialFormData = {\n  email: \"\",\n  password: \"\",\n  confirmPassword: \"\"\n};\n\nvar useQuery = function useQuery() {\n  return new URLSearchParams(useLocation().search);\n};\n\nexport default function ContactUs(props) {\n  var query = useQuery();\n  var token = query.get(\"token\");\n  var email = query.get(\"email\");\n\n  var _useState = useState(initialFormData),\n      _useState2 = _slicedToArray(_useState, 2),\n      formData = _useState2[0],\n      setFormData = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var history = useHistory();\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errorPassword = _useState6[0],\n      setErrorPassword = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorConfirmPassword = _useState8[0],\n      setErrorConfirmPassword = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      msg = _useState10[0],\n      setMsg = _useState10[1];\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setFormData(_objectSpread({}, formData, _defineProperty({}, name, value)));\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var flag, requestObj, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setLoading(true);\n              flag = validateInput();\n\n              if (flag) {\n                _context.next = 6;\n                break;\n              }\n\n              setLoading(false);\n              return _context.abrupt(\"return\");\n\n            case 6:\n              requestObj = {\n                email: email,\n                token: token,\n                password: formData.password,\n                password_confirmation: formData.confirmPassword\n              };\n              _context.next = 9;\n              return API.reset(requestObj);\n\n            case 9:\n              response = _context.sent;\n\n              if (response.status === 200) {\n                setMsg(\"Password reset successfully\");\n                setLoading(false);\n                setTimeout(function () {\n                  history.push({\n                    pathname: \"/login\"\n                  });\n                }, 4000);\n              }\n\n              if (response.status === 202) {\n                setLoading(false);\n              }\n\n              _context.next = 16;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n\n    return function handleSubmit() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function validateInput() {\n    var password = formData.password,\n        confirmPassword = formData.confirmPassword;\n    var flag = true;\n    var validatePassword = appUtil.validatePass(password);\n\n    if (validatePassword === 1) {\n      setErrorPassword({\n        field: \"password\",\n        message: \"\"\n      });\n    }\n\n    if (!(validatePassword === 1)) {\n      var _msg = \"\";\n\n      if (validatePassword === 0) {\n        _msg = \"Please enter the password.\";\n      } else {\n        _msg = \"8 character password required\";\n      }\n\n      setErrorPassword({\n        field: \"password\",\n        message: _msg\n      });\n      flag = false;\n    }\n\n    if (confirmPassword === password) {\n      setErrorConfirmPassword({\n        field: \"confirmPassword\",\n        message: \"\"\n      });\n    } else {\n      var _msg2 = \"Please enter the same password.\";\n      setErrorConfirmPassword({\n        field: \"confirmPassword\",\n        message: _msg2\n      });\n      flag = false;\n    }\n\n    return flag;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex md:h-auto lg:min-h-screen bg-white px-36\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-1/2 bg-cover md:block hidden\",\n    style: {\n      backgroundImage: \"url(https://images.unsplash.com/photo-1520243947988-b7b79f7873e9?ixid=MXwxMjA3fDB8MHxzZWFyY2h8NDd8fGJsYWNrJTIwZm9yZXN0fGVufDB8fDB8eWVsbG93&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"md:w-1/2 max-w-lg mx-auto my-auto px-4 py-5 shadow-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-left p-0 font-sans mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \" text-gray-800 text-3xl font-medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, \"Reset Password\"), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"p-1 text-gray-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Don't worry! We've got your back.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3 focus:outline-none\",\n    placeholder: \"Email\",\n    name: \"email\" // onChange={handleChange}\n    ,\n    readOnly: true,\n    defaultValue: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"-mx-3 md:flex mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"md:w-full px-3 mb-6 md:mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3 focus:outline-none\",\n    id: \"grid-first-name\",\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"password\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }), errorPassword.field === \"password\" && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-12px font-semibold text-red-800 my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, errorPassword.message))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"-mx-3 md:flex mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"md:w-full px-3 mb-6 md:mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3\",\n    id: \"grid-first-name\",\n    type: \"password\",\n    placeholder: \"Confirm Password\",\n    name: \"confirmPassword\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }), errorConfirmPassword.field === \"confirmPassword\" && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-12px font-semibold text-red-800 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }, errorConfirmPassword.message))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"py-3 bg-red-800 text-white w-full rounded hover:bg-red-900 border-2 border-red-800 hover:border-red-900 focus:outline-none\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader ease-linear rounded-full mx-auto border-2 border-t-2 border-gray-200 h-5 w-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }, \"Confirm Password\"))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-12px font-semibold text-green-500 pt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, msg), /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"block  p-5 text-center text-gray-800  text-xs \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, \"Back to Sign in\"))));\n}","map":{"version":3,"sources":["/home/sankar/reactjs/valorox/src/container/login/resetPassword.js"],"names":["React","useState","API","Link","useLocation","useHistory","appUtil","initialFormData","email","password","confirmPassword","useQuery","URLSearchParams","search","ContactUs","props","query","token","get","formData","setFormData","loading","setLoading","history","errorPassword","setErrorPassword","errorConfirmPassword","setErrorConfirmPassword","msg","setMsg","handleChange","e","target","name","value","handleSubmit","flag","validateInput","requestObj","password_confirmation","reset","response","status","setTimeout","push","pathname","validatePassword","validatePass","field","message","backgroundImage"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAO,KAAKC,GAAZ,MAAqB,eAArB;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAO,KAAKC,OAAZ,MAAyB,yBAAzB;AAEA,IAAMC,eAAe,GAAG;AACtBC,EAAAA,KAAK,EAAE,EADe;AAEtBC,EAAAA,QAAQ,EAAE,EAFY;AAGtBC,EAAAA,eAAe,EAAE;AAHK,CAAxB;;AAMA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,SAAO,IAAIC,eAAJ,CAAoBR,WAAW,GAAGS,MAAlC,CAAP;AACD,CAFD;;AAGA,eAAe,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACvC,MAAIC,KAAK,GAAGL,QAAQ,EAApB;AACA,MAAMM,KAAK,GAAGD,KAAK,CAACE,GAAN,CAAU,OAAV,CAAd;AACA,MAAMV,KAAK,GAAGQ,KAAK,CAACE,GAAN,CAAU,OAAV,CAAd;;AAHuC,kBAIPjB,QAAQ,CAACM,eAAD,CAJD;AAAA;AAAA,MAIhCY,QAJgC;AAAA,MAItBC,WAJsB;;AAAA,mBAKTnB,QAAQ,CAAC,KAAD,CALC;AAAA;AAAA,MAKhCoB,OALgC;AAAA,MAKvBC,UALuB;;AAMvC,MAAMC,OAAO,GAAGlB,UAAU,EAA1B;;AANuC,mBAOGJ,QAAQ,CAAC,EAAD,CAPX;AAAA;AAAA,MAOhCuB,aAPgC;AAAA,MAOjBC,gBAPiB;;AAAA,mBAQiBxB,QAAQ,CAAC,EAAD,CARzB;AAAA;AAAA,MAQhCyB,oBARgC;AAAA,MAQVC,uBARU;;AAAA,mBASjB1B,QAAQ,CAAC,EAAD,CATS;AAAA;AAAA,MAShC2B,GATgC;AAAA,MAS3BC,MAT2B;;AAWvC,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;AAAA,oBACFA,CAAC,CAACC,MADA;AAAA,QAClBC,IADkB,aAClBA,IADkB;AAAA,QACZC,KADY,aACZA,KADY;AAE1Bd,IAAAA,WAAW,mBACND,QADM,sBAERc,IAFQ,EAEDC,KAFC,GAAX;AAID,GAND;;AAQA,MAAMC,YAAY;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjBb,cAAAA,UAAU,CAAC,IAAD,CAAV;AACIc,cAAAA,IAHa,GAGNC,aAAa,EAHP;;AAAA,kBAIZD,IAJY;AAAA;AAAA;AAAA;;AAKfd,cAAAA,UAAU,CAAC,KAAD,CAAV;AALe;;AAAA;AAQXgB,cAAAA,UARW,GAQE;AACjB9B,gBAAAA,KAAK,EAAEA,KADU;AAEjBS,gBAAAA,KAAK,EAAEA,KAFU;AAGjBR,gBAAAA,QAAQ,EAAEU,QAAQ,CAACV,QAHF;AAIjB8B,gBAAAA,qBAAqB,EAAEpB,QAAQ,CAACT;AAJf,eARF;AAAA;AAAA,qBAcMR,GAAG,CAACsC,KAAJ,CAAUF,UAAV,CAdN;;AAAA;AAcXG,cAAAA,QAdW;;AAejB,kBAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3Bb,gBAAAA,MAAM,CAAC,6BAAD,CAAN;AACAP,gBAAAA,UAAU,CAAC,KAAD,CAAV;AACAqB,gBAAAA,UAAU,CAAC,YAAM;AACfpB,kBAAAA,OAAO,CAACqB,IAAR,CAAa;AACXC,oBAAAA,QAAQ,EAAE;AADC,mBAAb;AAGD,iBAJS,EAIP,IAJO,CAAV;AAKD;;AACD,kBAAIJ,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BpB,gBAAAA,UAAU,CAAC,KAAD,CAAV;AACD;;AA1BgB;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZa,YAAY;AAAA;AAAA;AAAA,KAAlB;;AA8BA,WAASE,aAAT,GAAyB;AAAA,QACf5B,QADe,GACeU,QADf,CACfV,QADe;AAAA,QACLC,eADK,GACeS,QADf,CACLT,eADK;AAEvB,QAAI0B,IAAI,GAAG,IAAX;AAEA,QAAIU,gBAAgB,GAAGxC,OAAO,CAACyC,YAAR,CAAqBtC,QAArB,CAAvB;;AACA,QAAIqC,gBAAgB,KAAK,CAAzB,EAA4B;AAC1BrB,MAAAA,gBAAgB,CAAC;AACfuB,QAAAA,KAAK,EAAE,UADQ;AAEfC,QAAAA,OAAO,EAAE;AAFM,OAAD,CAAhB;AAID;;AACD,QAAI,EAAEH,gBAAgB,KAAK,CAAvB,CAAJ,EAA+B;AAC7B,UAAIlB,IAAG,GAAG,EAAV;;AACA,UAAIkB,gBAAgB,KAAK,CAAzB,EAA4B;AAC1BlB,QAAAA,IAAG,GAAG,4BAAN;AACD,OAFD,MAEO;AACLA,QAAAA,IAAG,GAAG,+BAAN;AACD;;AACDH,MAAAA,gBAAgB,CAAC;AACfuB,QAAAA,KAAK,EAAE,UADQ;AAEfC,QAAAA,OAAO,EAAErB;AAFM,OAAD,CAAhB;AAIAQ,MAAAA,IAAI,GAAG,KAAP;AACD;;AACD,QAAI1B,eAAe,KAAKD,QAAxB,EAAkC;AAChCkB,MAAAA,uBAAuB,CAAC;AACtBqB,QAAAA,KAAK,EAAE,iBADe;AAEtBC,QAAAA,OAAO,EAAE;AAFa,OAAD,CAAvB;AAID,KALD,MAKO;AACL,UAAIrB,KAAG,GAAG,iCAAV;AACAD,MAAAA,uBAAuB,CAAC;AACtBqB,QAAAA,KAAK,EAAE,iBADe;AAEtBC,QAAAA,OAAO,EAAErB;AAFa,OAAD,CAAvB;AAIAQ,MAAAA,IAAI,GAAG,KAAP;AACD;;AACD,WAAOA,IAAP;AACD;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,+CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,gCADZ;AAEE,IAAA,KAAK,EAAE;AACLc,MAAAA,eAAe,EACb;AAFG,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eASE;AAAK,IAAA,SAAS,EAAC,yDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,qCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AAAI,IAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAJF,CADF,eAUE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,SAAS,EAAC,2HAFZ;AAGE,IAAA,WAAW,EAAC,OAHd;AAIE,IAAA,IAAI,EAAC,OAJP,CAKE;AALF;AAME,IAAA,QAAQ,MANV;AAOE,IAAA,YAAY,EAAE1C,KAPhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAVF,eAsBE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,2HADZ;AAEE,IAAA,EAAE,EAAC,iBAFL;AAGE,IAAA,IAAI,EAAC,UAHP;AAIE,IAAA,WAAW,EAAC,UAJd;AAKE,IAAA,IAAI,EAAC,UALP;AAME,IAAA,QAAQ,EAAEsB,YANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EASGN,aAAa,CAACwB,KAAd,KAAwB,UAAxB,iBACC;AAAG,IAAA,SAAS,EAAC,2CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGxB,aAAa,CAACyB,OADjB,CAVJ,CADF,CAtBF,eAuCE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EACP,wGAFJ;AAIE,IAAA,EAAE,EAAC,iBAJL;AAKE,IAAA,IAAI,EAAC,UALP;AAME,IAAA,WAAW,EAAC,kBANd;AAOE,IAAA,IAAI,EAAC,iBAPP;AAQE,IAAA,QAAQ,EAAEnB,YARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAYGJ,oBAAoB,CAACsB,KAArB,KAA+B,iBAA/B,iBACC;AAAG,IAAA,SAAS,EAAC,2CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGtB,oBAAoB,CAACuB,OADxB,CAbJ,CADF,CAvCF,eA4DE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,4HADZ;AAEE,IAAA,OAAO,EAAEd,YAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIGd,OAAO,gBACN;AAAK,IAAA,SAAS,EAAC,qFAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADM,gBAGN;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAPJ,CADF,CA5DF,eAwEE;AAAG,IAAA,SAAS,EAAC,6CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4DO,GAA5D,CAxEF,eA0EE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,gDAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,CA1EF,CATF,CADF;AA4FD","sourcesContent":["import React, { useState } from \"react\";\nimport * as API from \"../../api/api\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport * as appUtil from \"./../../helper/appUtils\";\n\nconst initialFormData = {\n  email: \"\",\n  password: \"\",\n  confirmPassword: \"\",\n};\n\nconst useQuery = () => {\n  return new URLSearchParams(useLocation().search);\n};\nexport default function ContactUs(props) {\n  let query = useQuery();\n  const token = query.get(\"token\");\n  const email = query.get(\"email\");\n  const [formData, setFormData] = useState(initialFormData);\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const [errorPassword, setErrorPassword] = useState(\"\");\n  const [errorConfirmPassword, setErrorConfirmPassword] = useState(\"\");\n  const [msg, setMsg] = useState(\"\");\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = async () => {\n    try {\n      setLoading(true);\n      let flag = validateInput();\n      if (!flag) {\n        setLoading(false);\n        return;\n      }\n      const requestObj = {\n        email: email,\n        token: token,\n        password: formData.password,\n        password_confirmation: formData.confirmPassword,\n      };\n      const response = await API.reset(requestObj);\n      if (response.status === 200) {\n        setMsg(\"Password reset successfully\");\n        setLoading(false);\n        setTimeout(() => {\n          history.push({\n            pathname: \"/login\",\n          });\n        }, 4000);\n      }\n      if (response.status === 202) {\n        setLoading(false);\n      }\n    } catch (e) {}\n  };\n\n  function validateInput() {\n    const { password, confirmPassword } = formData;\n    let flag = true;\n\n    let validatePassword = appUtil.validatePass(password);\n    if (validatePassword === 1) {\n      setErrorPassword({\n        field: \"password\",\n        message: \"\",\n      });\n    }\n    if (!(validatePassword === 1)) {\n      let msg = \"\";\n      if (validatePassword === 0) {\n        msg = \"Please enter the password.\";\n      } else {\n        msg = \"8 character password required\";\n      }\n      setErrorPassword({\n        field: \"password\",\n        message: msg,\n      });\n      flag = false;\n    }\n    if (confirmPassword === password) {\n      setErrorConfirmPassword({\n        field: \"confirmPassword\",\n        message: \"\",\n      });\n    } else {\n      let msg = \"Please enter the same password.\";\n      setErrorConfirmPassword({\n        field: \"confirmPassword\",\n        message: msg,\n      });\n      flag = false;\n    }\n    return flag;\n  }\n\n  return (\n    <div className=\"flex md:h-auto lg:min-h-screen bg-white px-36\">\n      <div\n        className=\"w-1/2 bg-cover md:block hidden\"\n        style={{\n          backgroundImage:\n            \"url(https://images.unsplash.com/photo-1520243947988-b7b79f7873e9?ixid=MXwxMjA3fDB8MHxzZWFyY2h8NDd8fGJsYWNrJTIwZm9yZXN0fGVufDB8fDB8eWVsbG93&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60)\",\n        }}\n      ></div>\n\n      <div className=\"md:w-1/2 max-w-lg mx-auto my-auto px-4 py-5 shadow-none\">\n        <div className=\"text-left p-0 font-sans mb-6\">\n          <h1 className=\" text-gray-800 text-3xl font-medium\">\n            Reset Password\n          </h1>\n          <h3 className=\"p-1 text-gray-700\">\n            Don't worry! We've got your back.\n          </h3>\n        </div>\n\n        <div className=\"mb-3\">\n          <input\n            type=\"text\"\n            className=\"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3 focus:outline-none\"\n            placeholder=\"Email\"\n            name=\"email\"\n            // onChange={handleChange}\n            readOnly\n            defaultValue={email}\n          />\n        </div>\n\n        <div className=\"-mx-3 md:flex mb-0\">\n          <div className=\"md:w-full px-3 mb-6 md:mb-0\">\n            <input\n              className=\"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3 focus:outline-none\"\n              id=\"grid-first-name\"\n              type=\"password\"\n              placeholder=\"Password\"\n              name=\"password\"\n              onChange={handleChange}\n            />\n            {errorPassword.field === \"password\" && (\n              <p className=\"text-12px font-semibold text-red-800 my-2\">\n                {errorPassword.message}\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"-mx-3 md:flex mb-3\">\n          <div className=\"md:w-full px-3 mb-6 md:mb-0\">\n            <input\n              className={\n                \"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3\"\n              }\n              id=\"grid-first-name\"\n              type=\"password\"\n              placeholder=\"Confirm Password\"\n              name=\"confirmPassword\"\n              onChange={handleChange}\n            />\n\n            {errorConfirmPassword.field === \"confirmPassword\" && (\n              <p className=\"text-12px font-semibold text-red-800 mt-2\">\n                {errorConfirmPassword.message}\n              </p>\n            )}\n          </div>\n        </div>\n\n        <div className=\"mt-5\">\n          <button\n            className=\"py-3 bg-red-800 text-white w-full rounded hover:bg-red-900 border-2 border-red-800 hover:border-red-900 focus:outline-none\"\n            onClick={handleSubmit}\n          >\n            {loading ? (\n              <div className=\"loader ease-linear rounded-full mx-auto border-2 border-t-2 border-gray-200 h-5 w-5\"></div>\n            ) : (\n              <div className=\"text-white\">Confirm Password</div>\n            )}\n          </button>\n        </div>\n        <p className=\"text-12px font-semibold text-green-500 pt-2\">{msg}</p>\n\n        <Link to=\"/login\">\n          <span className=\"block  p-5 text-center text-gray-800  text-xs \">\n            Back to Sign in\n          </span>\n        </Link>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}